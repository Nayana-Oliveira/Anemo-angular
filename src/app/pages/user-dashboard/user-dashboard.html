<div style="background-color: #6b9b76; min-height: 100vh">
  <div class="container" style="padding: 40px 0">
    <div class="dashboard-grid">
      
      <div class="sidebar-menu">
        <div *ngFor="let item of menuItems"
             [class.active]="activeSection === item.id"
             class="menu-item"
             (click)="handleMenuClick(item.id)">
          <img [src]="item.icon" alt="" class="menu-icon-img" />
          <span>{{ item.label }}</span>
        </div>
      </div>

      <div class="main-content">
        <div [ngSwitch]="activeSection">

          <div *ngSwitchCase="'account'">
            <div class="content-section">
              <h2>Minha Conta</h2>
              <div class="user-info-grid" *ngIf="user">
                <div>
                  <p><strong>Nome:</strong> {{ user.fullName || 'Não informado' }}</p>
                  <p><strong>E-mail:</strong> {{ user.email || 'Não informado' }}</p>
                  <button class="edit-btn" (click)="activeSection = 'data'">
                    Editar meus dados
                  </button>
                </div>
                <div class="progress-section">
                  <div class="progress-circle" 
                       [style.background]="'conic-gradient(#477556 ' + (completionPercentage * 3.6) + 'deg, #e0e0e0 0deg)'">
                    <div class="progress-inner">
                      <span class="progress-percentage">{{ completionPercentage }}%</span>
                    </div>
                  </div>
                  <div class="progress-label">
                    <p>Dados completos</p>
                    <a *ngIf="completionPercentage < 100" 
                       href="#" 
                       class="complete-now-link" 
                       (click)="activeSection = 'data'; $event.preventDefault()">
                       Completar agora
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div *ngSwitchCase="'data'">
            <div class="content-section">
              <h2>Meus Dados Pessoais</h2>
              <form (ngSubmit)="handleDataSubmit()" *ngIf="formData">
                <div class="form-group">
                  <label>Nome completo:</label>
                  <input type="text" name="fullName" [(ngModel)]="formData.fullName" />
                </div>
                <div class="form-grid-2">
                  <div class="form-group">
                    <label>Data de nascimento:</label>
                    <input type="date" name="birthDate" [(ngModel)]="formData.birthDate" />
                  </div>
                  <div class="form-group">
                    <label>CPF:</label>
                    <input type="text" name="cpf" [(ngModel)]="formData.cpf" />
                  </div>
                </div>
                <div class="form-grid-2">
                  <div class="form-group">
                    <label>Telefone:</label>
                    <input type="tel" name="phone" [(ngModel)]="formData.phone" />
                  </div>
                  <div class="form-group">
                    <label>Celular:</label>
                    <input type="tel" name="mobile" [(ngModel)]="formData.mobile" />
                  </div>
                </div>
                <div class="form-group">
                  <label>E-mail:</label>
                  <input type="email" name="email" [(ngModel)]="formData.email" />
                </div>
                <div style="text-align: right; margin-top: 20px">
                  <button type="submit" class="btn btn-primary">Salvar Alterações</button>
                </div>
              </form>
            </div>
          </div>

          <div *ngSwitchCase="'addresses'">
            <div class="address-page-layout" 
                 [class.two-columns]="isAddingAddress || selectedAddress">
              
              <div class="address-list-container">
                <div class="address-header">
                  <h3>Seus Endereços</h3>
                  <button class="btn btn-primary btn-sm" (click)="handleAddNewAddress()">Adicionar Novo</button>
                </div>
                
                <div *ngIf="user?.addresses && user.addresses.length > 0; else noAddress">
                  <div class="address-list">
                    <div *ngFor="let addr of user.addresses" 
                         class="address-list-item"
                         [class.active]="selectedAddress?.id === addr.id">
                      <div class="address-info" (click)="handleSelectAddress(addr)">
                        <p><strong>{{ addr.street }}, {{ addr.number }}</strong></p>
                        <p>{{ addr.city }}, {{ addr.state }}</p>
                      </div>
                      <div class="address-item-actions">
                         <button class="btn-edit-address" (click)="handleSelectAddress(addr)">Editar</button>
                         <button class="btn-delete-address" (click)="handleAddressDelete(addr.id)">
                            X 
                         </button>
                      </div>
                    </div>
                  </div>
                </div>
                <ng-template #noAddress>
                  <p>Nenhum endereço cadastrado.</p>
                </ng-template>
              </div>
              
              <div *ngIf="isAddingAddress || selectedAddress" class="address-form-container">
                <h3>{{ isAddingAddress ? 'Adicionar Novo Endereço' : 'Editar Endereço' }}</h3>
                <form (ngSubmit)="handleAddressSubmit()">
                  <div class="form-group">
                    <label>Rua:</label>
                    <input type="text" name="street" [(ngModel)]="addressFormData.street" required />
                  </div>
                  <div class="form-grid-2">
                    <div class="form-group">
                      <label>Número:</label>
                      <input type="text" name="number" [(ngModel)]="addressFormData.number" required />
                    </div>
                    <div class="form-group">
                      <label>CEP:</label>
                      <input type="text" name="zipCode" [(ngModel)]="addressFormData.zipCode" required />
                    </div>
                  </div>
                  <div class="form-group">
                    <label>Bairro:</label>
                    <input type="text" name="neighborhood" [(ngModel)]="addressFormData.neighborhood" required />
                  </div>
                  <div class="form-grid-2">
                    <div class="form-group">
                      <label>Cidade:</label>
                      <input type="text" name="city" [(ngModel)]="addressFormData.city" required />
                    </div>
                    <div class="form-group">
                      <label>Estado:</label>
                      <input type="text" name="state" [(ngModel)]="addressFormData.state" required />
                    </div>
                  </div>
                  <div class="form-actions">
                    <button type="button" class="btn btn-secondary" (click)="handleCancelAddress()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">{{ isAddingAddress ? 'Salvar' : 'Atualizar' }}</button>
                  </div>
                </form>
              </div>
            </div>
          </div>

          <div *ngSwitchCase="'orders'">
            <div class="content-section">
              <h2>Meus Pedidos</h2>
              <div class="empty-state">
                <p>Você ainda não fez nenhum pedido.</p>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>