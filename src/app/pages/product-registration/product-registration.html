<div style="background-color: #6b9b76; min-height: 100vh">
  <header style="background-color: #6b9b76; padding: 20px 0">
    <div class="container">
      <div style="display: flex; justify-content: space-between; align-items: center">
        <div class="logo" (click)="navigateToDashboard()" style="cursor: pointer">
          </div>
          <button class="btn btn-secondary" (click)="navigateToDashboard()">
            Voltar ao Painel
          </button>
      </div>
    </div>
  </header>

  <div class="container" style="padding: 40px 0">
    <div style="background-color: #f0ebe5; border-radius: 20px; padding: 60px; max-width: 1000px; margin: 0 auto">
      <h1 style="font-size: 32px; font-weight: bold; margin-bottom: 40px; color: #333">
        Cadastro de Produtos
      </h1>

      <form (ngSubmit)="handleSubmit()">
        <div class="form-grid-2" style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px">
          <div class="form-group">
            <label for="productName">Nome do produto</label>
            <input type="text" id="productName" name="productName" [(ngModel)]="formData.productName" required />
          </div>
          <div class="form-group">
            <label for="productId">ID do produto</label>
            <input type="text" id="productId" name="productId" [(ngModel)]="formData.productId" required />
          </div>
        </div>

        <div class="form-grid-2" style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px">
          <div class="form-group">
            <label for="category">Categoria</label>
            <select id="category" name="category" [(ngModel)]="formData.category" required>
              <option value="">Selecione uma categoria</option>
              <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
            </select>
          </div>
            <div class="form-group">
            <label for="price">Preço</label>
            <input type="number" id="price" name="price" [(ngModel)]="formData.price" placeholder="0.00" step="0.01" required />
          </div>
        </div>

        <div class="form-grid-2" style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px">
            <div class="form-group">
                <label for="quantity">Quantidade</label>
                <input type="number" id="quantity" name="quantity" [(ngModel)]="formData.quantity" required />
            </div>
            <div class="form-group">
                <label for="size">Tamanho</label>
                <select id="size" name="size" [(ngModel)]="formData.size" required>
                  <option value="">Selecione um tamanho</option>
                  <option value="pequeno">Pequeno</option>
                  <option value="medio">Médio</option>
                  <option value="grande">Grande</option>
                </select>
            </div>
        </div>

        <div class="form-group">
          <label for="description">Descrição</label>
          <textarea id="description" name="description" [(ngModel)]="formData.description" rows="6" placeholder="Descreva o produto..." required></textarea>
        </div>

        <div class="form-group">
          <label>Fotos do Produto</label>
          <div
            class="upload-area"
            style="border: 2px dashed #ddd; border-radius: 8px; padding: 20px; text-align: center; background-color: white; cursor: pointer; min-height: 150px; display: flex; align-items: center; justify-content: center; flex-direction:column"
            (click)="photosInput.click()">
            
            <div *ngIf="imagePreviews.length > 0; else uploadPrompt" style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-top: 10px">
              <img *ngFor="let preview of imagePreviews" [src]="preview" alt="Preview" style="height: 100px; width: 100px; object-fit: cover; border-radius: 8px" />
            </div>

            <ng-template #uploadPrompt>
              <img src="/assets/visor-da-camera.png" alt="Camera" style="width: 48px; height: 48px; margin-bottom: 15px" />
              <p style="color: #666; font-size: 16px; font-weight: 500; margin: 0">Adicionar fotos</p>
            </ng-template>

            <input type="file" id="photos" accept="image/*" multiple 
                   (change)="handleImageUpload($event)" 
                   style="display: none" 
                   #photosInput />
          </div>
          <small style="color: #666; margin-top: 5px; display: block">
            *As imagens selecionadas serão referenciadas. Certifique-se de que elas estejam na pasta `public/products/`.
          </small>
        </div>

        <div style="text-align: center; margin-top: 40px">
          <button type="submit" class="btn btn-primary" style="min-width: 150px; font-size: 18px">
            Cadastrar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>